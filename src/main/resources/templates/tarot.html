<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarot T√¨nh Y√™u üîÆ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
    <style>
        body {
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            color: #fff;
            overflow: hidden;
        }

        /* T·∫°o sao l·∫•p l√°nh n·ªÅn */
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            background-image:
                    radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)),
                    radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)),
                    radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0,0,0,0)),
                    radial-gradient(2px 2px at 90px 40px, #fff, rgba(0,0,0,0)),
                    radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: twinkle 4s infinite;
            opacity: 0.5;
        }

        @keyframes twinkle {
            50% { opacity: 1; }
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            color: #d4af37; /* M√†u v√†ng kim */
            text-shadow: 0 0 10px #d4af37;
            margin-bottom: 10px;
            z-index: 10;
            text-align: center;
        }

        .subtitle {
            color: #a8a8a8;
            margin-bottom: 40px;
            font-style: italic;
            z-index: 10;
            text-align: center;
            max-width: 600px;
        }

        /* Khu v·ª±c b√†i */
        .card-container {
            display: flex;
            gap: 20px;
            perspective: 1000px;
            z-index: 10;
            flex-wrap: wrap;
            justify-content: center;
        }

        .card {
            width: 200px;
            height: 350px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-20px);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        }

        /* M·∫∑t tr∆∞·ªõc (√öp) */
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            border: 2px solid #d4af37;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .card-front {
            background: #2c3e50;
            background-image: url('https://www.transparenttextures.com/patterns/stardust.png');
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* H·ªça ti·∫øt m·∫∑t sau l√° b√†i */
        .card-front::after {
            content: '‚ò™';
            font-size: 5rem;
            color: #d4af37;
            opacity: 0.8;
        }

        /* M·∫∑t sau (Ng·ª≠a - K·∫øt qu·∫£) */
        .card-back {
            background: #fff;
            transform: rotateY(180deg);
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            text-align: center;
            box-sizing: border-box;
        }

        .card.flipped {
            transform: rotateY(180deg) scale(1.1);
            z-index: 20;
        }

        .card-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .card-name {
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 5px;
            border-bottom: 1px solid #d4af37;
            padding-bottom: 5px;
            width: 100%;
        }

        .card-desc {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* N√∫t reset */
        .btn-reset {
            margin-top: 30px;
            padding: 10px 30px;
            background: transparent;
            border: 1px solid #d4af37;
            color: #d4af37;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s;
            display: none; /* ·∫®n l√∫c ƒë·∫ßu */
        }
        .btn-reset:hover { background: #d4af37; color: #000; }

        /* Hi·ªáu ·ª©ng s∆∞∆°ng m√π */
        .fog {
            position: fixed;
            bottom: 0; left: 0; width: 100%; height: 200px;
            background: linear-gradient(to top, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
            z-index: 1;
        }
    </style>
</head>
<body>

<div class="stars"></div>
<div class="fog"></div>

<a href="/" style="position:absolute; top:20px; left:20px; color:#d4af37; text-decoration:none; z-index:20;">‚¨Ö Trang ch·ªß</a>

<h1>Th√¥ng ƒêi·ªáp V≈© Tr·ª•</h1>
<div class="subtitle">"H√£y t·∫≠p trung nghƒ© v·ªÅ anh, h√≠t th·ªü s√¢u v√† ch·ªçn m·ªôt l√° b√†i..."</div>

<div class="card-container">
    <div class="card" onclick="pickCard(this, 0)">
        <div class="card-front"></div>
        <div class="card-back" id="back-0"></div>
    </div>
    <div class="card" onclick="pickCard(this, 1)">
        <div class="card-front"></div>
        <div class="card-back" id="back-1"></div>
    </div>
    <div class="card" onclick="pickCard(this, 2)">
        <div class="card-front"></div>
        <div class="card-back" id="back-2"></div>
    </div>
</div>

<button class="btn-reset" onclick="location.reload()">Ch·ªçn L·∫°i (Ng√†y Mai)</button>

<script>
    // --- D·ªÆ LI·ªÜU B√ÄI TAROT (Ch·ªâ ch·ªçn b√†i √Ω nghƒ©a t·ªët) ---
    // --- D·ªÆ LI·ªÜU B√ÄI TAROT (22 L√° B√†i T√¨nh Y√™u Tuy·ªÉn Ch·ªçn) ---
    const tarotDeck = [
        {
            name: "The Lovers (T√¨nh Nh√¢n)",
            img: "https://upload.wikimedia.org/wikipedia/en/d/db/RWS_Tarot_06_Lovers.jpg",
            meaning: "L√° b√†i ƒë·∫πp nh·∫•t v·ªÅ t√¨nh y√™u! N√≥ b√°o hi·ªáu s·ª± h√≤a h·ª£p tuy·ªát ƒë·ªëi. D√π c√≥ kho·∫£ng c√°ch, tr√°i tim hai b·∫°n v·∫´n ƒë·∫≠p chung m·ªôt nh·ªãp. Hai ng∆∞·ªùi sinh ra l√† ƒë·ªÉ d√†nh cho nhau."
        },
        {
            name: "The Sun (M·∫∑t Tr·ªùi)",
            img: "https://upload.wikimedia.org/wikipedia/en/1/17/RWS_Tarot_19_Sun.jpg",
            meaning: "Ni·ªÅm vui r·ª±c r·ª° v√† h·∫°nh ph√∫c tr·ªçn v·∫πn. M·ªçi lo √¢u s·∫Ω tan bi·∫øn, ch·ªâ c√≤n l·∫°i √°nh s√°ng ·∫•m √°p. Anh ·∫•y ch√≠nh l√† m·∫∑t tr·ªùi lu√¥n h∆∞·ªõng v·ªÅ ph√≠a b·∫°n."
        },
        {
            name: "The Star (Ng√¥i Sao)",
            img: "https://upload.wikimedia.org/wikipedia/en/d/db/RWS_Tarot_17_Star.jpg",
            meaning: "Ni·ªÅm hy v·ªçng v√† s·ª± ch·ªØa l√†nh. V≈© tr·ª• ƒëang b·∫£o v·ªá t√¨nh y√™u n√†y. Kho·∫£ng c√°ch ƒë·ªãa l√Ω ch·ªâ l√† th·ª≠ th√°ch nh·ªè ƒë·ªÉ t√¨nh y√™u th√™m b·ªÅn ch·∫∑t."
        },
        {
            name: "Two of Cups (Hai Chi·∫øc C·ªëc)",
            img: "https://upload.wikimedia.org/wikipedia/en/8/88/Cups02.jpg",
            meaning: "S·ª± k·∫øt n·ªëi tri k·ª∑. Hai t√¢m h·ªìn th·∫•u hi·ªÉu nhau m√† kh√¥ng c·∫ßn nhi·ªÅu l·ªùi n√≥i. M·ªôt m·ªëi quan h·ªá b√¨nh ƒë·∫≥ng, t√¥n tr·ªçng v√† y√™u th∆∞∆°ng s√¢u s·∫Øc."
        },
        {
            name: "The Empress (N·ªØ Ho√†ng)",
            img: "https://upload.wikimedia.org/wikipedia/en/d/d2/RWS_Tarot_03_Empress.jpg",
            meaning: "V·∫ª ƒë·∫πp n·ªØ t√≠nh v√† s·ª± tr√π ph√∫. B·∫°n l√† 'N·ªØ ho√†ng' trong l√≤ng anh ·∫•y. Anh ·∫•y y√™u b·∫°n v√¨ s·ª± d·ªãu d√†ng, bao dung v√† s·ª± quan t√¢m c·ªßa b·∫°n."
        },
        {
            name: "The Emperor (Ho√†ng ƒê·∫ø)",
            img: "https://upload.wikimedia.org/wikipedia/en/c/c3/RWS_Tarot_04_Emperor.jpg",
            meaning: "S·ª± ·ªïn ƒë·ªãnh, b·∫£o v·ªá v√† tr√°ch nhi·ªám. Anh ·∫•y ƒëang n·ªó l·ª±c x√¢y d·ª±ng m·ªôt t∆∞∆°ng lai v·ªØng ch·∫Øc cho c·∫£ hai. B·∫°n c√≥ th·ªÉ ho√†n to√†n d·ª±a v√†o b·ªù vai n√†y."
        },
        {
            name: "Ace of Cups (√Åt C∆°)",
            img: "https://upload.wikimedia.org/wikipedia/en/3/36/Cups01.jpg",
            meaning: "C·∫£m x√∫c d·∫°t d√†o nh∆∞ n∆∞·ªõc tr√†n ly. T√¨nh y√™u c·ªßa hai b·∫°n lu√¥n t∆∞∆°i m·ªõi nh∆∞ ng√†y ƒë·∫ßu ti√™n. H√£y chu·∫©n b·ªã ƒë√≥n nh·∫≠n nh·ªØng b·∫•t ng·ªù l√£ng m·∫°n!"
        },
        {
            name: "Ten of Cups (M∆∞·ªùi Chi·∫øc C·ªëc)",
            img: "https://upload.wikimedia.org/wikipedia/en/6/69/Cups10.jpg",
            meaning: "B·ª©c tranh v·ªÅ 'H·∫°nh ph√∫c m√£i m√£i v·ªÅ sau'. L√° b√†i n√†y b√°o hi·ªáu m·ªôt gia ƒë√¨nh h·∫°nh ph√∫c, m·ªôt ng√¥i nh√† b√£o d·ª´ng sau c√°nh c·ª≠a v√† nh·ªØng ƒë·ª©a tr·∫ª."
        },
        {
            name: "Four of Wands (B·ªën G·∫≠y)",
            img: "https://upload.wikimedia.org/wikipedia/en/a/a4/Wands04.jpg",
            meaning: "S·ª± ƒÉn m·ª´ng v√† sum h·ªçp. L√° b√†i n√†y th∆∞·ªùng √°m ch·ªâ m·ªôt ƒë√°m c∆∞·ªõi ho·∫∑c vi·ªác d·ªçn v·ªÅ s·ªëng chung. Ng√†y anh ·∫•y tr·ªü v·ªÅ s·∫Ω l√† m·ªôt ng√†y h·ªôi l·ªõn!"
        },
        {
            name: "The World (Th·∫ø Gi·ªõi)",
            img: "https://upload.wikimedia.org/wikipedia/en/f/ff/RWS_Tarot_21_World.jpg",
            meaning: "S·ª± tr·ªçn v·∫πn v√† c√°i k·∫øt vi√™n m√£n. B·∫°n l√† 'c·∫£ th·∫ø gi·ªõi' c·ªßa anh ·∫•y. M·ªçi m·∫£nh gh√©p ƒë√£ v√†o ƒë√∫ng v·ªã tr√≠, h·∫°nh ph√∫c ƒëang ·ªü ngay tr∆∞·ªõc m·∫Øt."
        },
        {
            name: "Strength (S·ª©c M·∫°nh)",
            img: "https://upload.wikimedia.org/wikipedia/en/f/f5/RWS_Tarot_08_Strength.jpg",
            meaning: "S·ª± ki√™n nh·∫´n v√† s·ª©c m·∫°nh n·ªôi t√¢m. B·∫°n ƒëang r·∫•t m·∫°nh m·∫Ω khi ch·ªù ƒë·ª£i anh ·∫•y. T√¨nh y√™u n√†y ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n s·ª± tin t∆∞·ªüng v√† l√≤ng d≈©ng c·∫£m."
        },
        {
            name: "Wheel of Fortune (B√°nh Xe S·ªë Ph·∫≠n)",
            img: "https://upload.wikimedia.org/wikipedia/en/3/3c/RWS_Tarot_10_Wheel_of_Fortune.jpg",
            meaning: "ƒê·ªãnh m·ªánh ƒë√£ s·∫Øp ƒë·∫∑t. Vi·ªác hai b·∫°n g·∫∑p nhau kh√¥ng ph·∫£i ng·∫´u nhi√™n m√† l√† duy√™n s·ªë. Th·ªùi v·∫≠n ƒëang xoay chuy·ªÉn theo h∆∞·ªõng t·ªët ƒë·∫πp cho c·∫£ hai."
        },
        {
            name: "Six of Cups (S√°u Chi·∫øc C·ªëc)",
            img: "https://upload.wikimedia.org/wikipedia/en/1/17/Cups06.jpg",
            meaning: "K·ª∑ ni·ªám ng·ªçt ng√†o v√† s·ª± ng√¢y th∆°. Anh ·∫•y ƒëang nh·ªõ v·ªÅ nh·ªØng ng√†y ƒë·∫ßu m·ªõi quen, nh·ªØng c√°i n·∫Øm tay r·ª•t r√® v√† n·ª• c∆∞·ªùi c·ªßa b·∫°n."
        },
        {
            name: "Knight of Cups (Hi·ªáp Sƒ© C·ªëc)",
            img: "https://upload.wikimedia.org/wikipedia/en/f/f6/CupsKnight.jpg",
            meaning: "M·ªôt l·ªùi ƒë·ªÅ ngh·ªã l√£ng m·∫°n s·∫Øp ƒë·∫øn. Ch√†ng hi·ªáp sƒ© (l√† anh ·∫•y) ƒëang mang t√¨nh y√™u ƒë·∫øn cho b·∫°n. H√£y ch·ªù ƒë·ª£i m·ªôt tin nh·∫Øn ho·∫∑c m√≥n qu√† ng·ªçt ng√†o."
        },
        {
            name: "Ace of Pentacles (√Åt Ti·ªÅn)",
            img: "https://upload.wikimedia.org/wikipedia/en/f/fd/Pents01.jpg",
            meaning: "M·ªôt m√≥n qu√† gi√° tr·ªã ho·∫∑c c∆° h·ªôi m·ªõi b·ªÅn v·ªØng. M·ªëi quan h·ªá n√†y kh√¥ng ch·ªâ l√£ng m·∫°n m√† c√≤n r·∫•t th·ª±c t·∫ø v√† an to√†n."
        },
        {
            name: "Ten of Pentacles (M∆∞·ªùi ƒê·ªìng Ti·ªÅn)",
            img: "https://upload.wikimedia.org/wikipedia/en/6/64/Pents10.jpg",
            meaning: "S·ª± th·ªãnh v∆∞·ª£ng v√† di s·∫£n gia ƒë√¨nh. T√¨nh y√™u n√†y ƒë∆∞·ª£c s·ª± ·ªßng h·ªô c·ªßa gia ƒë√¨nh v√† c√≥ n·ªÅn t·∫£ng t√†i ch√≠nh, t√¨nh c·∫£m v·ªØng ch·∫Øc l√¢u d√†i."
        },
        {
            name: "The Magician (·∫¢o Thu·∫≠t Gia)",
            img: "https://upload.wikimedia.org/wikipedia/en/d/de/RWS_Tarot_01_Magician.jpg",
            meaning: "Bi·∫øn ∆∞·ªõc m∆° th√†nh hi·ªán th·ª±c. Anh ·∫•y c√≥ ƒë·ªß kh·∫£ nƒÉng v√† √Ω ch√≠ ƒë·ªÉ l√†m cho b·∫°n h·∫°nh ph√∫c. M·ªçi ƒëi·ªÅu b·∫°n mong mu·ªën trong m·ªëi quan h·ªá n√†y ƒë·ªÅu c√≥ th·ªÉ x·∫£y ra."
        },
        {
            name: "The Chariot (C·ªó Xe)",
            img: "https://upload.wikimedia.org/wikipedia/en/9/9b/RWS_Tarot_07_Chariot.jpg",
            meaning: "Chi·∫øn th·∫Øng kho·∫£ng c√°ch. D√π ƒë∆∞·ªùng ƒëi c√≥ ch√¥ng gai hay xa x√¥i, 'chi·∫øn binh' c·ªßa b·∫°n v·∫´n ƒëang lao v·ªÅ ph√≠a tr∆∞·ªõc ƒë·ªÉ s·ªõm ƒë∆∞·ª£c g·∫∑p b·∫°n."
        },
        {
            name: "Ace of Wands (√Åt G·∫≠y)",
            img: "https://upload.wikimedia.org/wikipedia/en/1/11/Wands01.jpg",
            meaning: "Ng·ªçn l·ª≠a ƒëam m√™ b√πng ch√°y. S·ª± thu h√∫t v·ªÅ m·∫∑t th·ªÉ x√°c v√† tinh th·∫ßn gi·ªØa hai b·∫°n c·ª±c k·ª≥ m·∫°nh m·∫Ω. T√¨nh y√™u lu√¥n n·ªìng nhi·ªát nh∆∞ l·ª≠a."
        },
        {
            name: "Justice (C√¥ng L√Ω)",
            img: "https://upload.wikimedia.org/wikipedia/en/e/e0/RWS_Tarot_11_Justice.jpg",
            meaning: "S·ª± c√¥ng b·∫±ng v√† x·ª©ng ƒë√°ng. B·∫°n ƒë√£ trao ƒëi y√™u th∆∞∆°ng ch√¢n th√†nh v√† b·∫°n x·ª©ng ƒë√°ng nh·∫≠n l·∫°i h·∫°nh ph√∫c tr·ªçn v·∫πn. Anh ·∫•y bi·∫øt tr√¢n tr·ªçng ƒëi·ªÅu ƒë√≥."
        },
        {
            name: "Three of Cups (Ba Chi·∫øc C·ªëc)",
            img: "https://upload.wikimedia.org/wikipedia/en/7/7a/Cups03.jpg",
            meaning: "Ni·ªÅm vui v√† t√¨nh b·∫°n. Tr∆∞·ªõc khi l√† ng∆∞·ªùi y√™u, hai b·∫°n l√† nh·ªØng ng∆∞·ªùi b·∫°n t·ªët nh·∫•t c·ªßa nhau. M·ªëi quan h·ªá lu√¥n tr√†n ng·∫≠p ti·∫øng c∆∞·ªùi."
        },
        {
            name: "Page of Cups (Ti·ªÉu ƒê·ªìng C·ªëc)",
            img: "https://upload.wikimedia.org/wikipedia/en/a/a6/CupsPage.jpg",
            meaning: "S·ª± ng·∫°c nhi√™n d·ªÖ th∆∞∆°ng. C√≥ th·ªÉ anh ·∫•y ƒëang √¢m th·∫ßm chu·∫©n b·ªã m·ªôt b·∫•t ng·ªù nh·ªè cho b·∫°n. H√£y m·ªü l√≤ng ƒë√≥n nh·∫≠n nh√©!"
        }
    ];
    let hasPicked = false;

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function pickCard(cardElement, index) {
        // Ki·ªÉm tra xem ƒë√£ b·ªëc ch∆∞a
        if (hasPicked) return;

        // Ki·ªÉm tra localStorage xem h√¥m nay b·ªëc ch∆∞a
        const today = new Date().toISOString().slice(0, 10);
        if (localStorage.getItem('last_tarot_date') === today) {
            alert("M·ªói ng√†y v≈© tr·ª• ch·ªâ g·ª≠i 1 th√¥ng ƒëi·ªáp th√¥i! Mai quay l·∫°i nh√© üòò");
            return;
        }

        hasPicked = true;
        localStorage.setItem('last_tarot_date', today);

        // Tr·ªôn b√†i v√† l·∫•y 1 l√° ng·∫´u nhi√™n
        const randomCard = tarotDeck[Math.floor(Math.random() * tarotDeck.length)];

        // Render n·ªôi dung v√†o m·∫∑t sau c·ªßa l√° b√†i ƒê∆Ø·ª¢C CH·ªåN
        const backFace = document.getElementById(`back-${index}`);
        backFace.innerHTML = `
                <img src="${randomCard.img}" class="card-img">
                <div class="card-name">${randomCard.name}</div>
                <div class="card-desc">${randomCard.meaning}</div>
            `;

        // L·∫≠t b√†i
        cardElement.classList.add('flipped');

        // L√†m m·ªù c√°c l√° c√≤n l·∫°i
        const allCards = document.querySelectorAll('.card');
        allCards.forEach(c => {
            if (c !== cardElement) {
                c.style.opacity = '0.3';
                c.style.pointerEvents = 'none';
            }
        });

        // G·ª≠i th√¥ng b√°o Discord
        fetch(`/api/read-tarot?cardName=${encodeURIComponent(randomCard.name)}&meaning=${encodeURIComponent(randomCard.meaning)}`, {
            method: 'POST'
        });

        // Hi·ªán n√∫t reset (cho vui, nh∆∞ng logic ch·∫∑n ng√†y v·∫´n ho·∫°t ƒë·ªông)
        setTimeout(() => {
            document.querySelector('.btn-reset').style.display = 'block';
        }, 1000);
    }
</script>
</body>
</html>