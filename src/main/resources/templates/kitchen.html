<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báº¿p CÆ¡m TÃ¬nh YÃªu ğŸ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #ffeaa7;
            font-family: 'Nunito', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            font-family: 'Fredoka One', cursive;
            color: #d35400;
            margin-top: 20px;
            text-align: center;
        }

        .subtitle { color: #e17055; margin-bottom: 20px; text-align: center; }

        /* Há»™p cÆ¡m */
        .bento-box {
            width: 300px;
            height: 300px;
            background: #d63031;
            border-radius: 40px;
            padding: 15px;
            box-shadow: 0 10px 0 #b71515;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 10px;
            position: relative;
            transition: transform 0.3s;
        }

        .compartment {
            background: #fff;
            border-radius: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            cursor: pointer;
            border: 2px dashed #ccc;
            overflow: hidden;
            position: relative;
        }

        .compartment.filled {
            border: 2px solid #fab1a0;
            background: #fff5f5;
        }

        .compartment:hover { background: #ffeaa7; }

        /* Menu chá»n mÃ³n */
        .menu-section {
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .category-title {
            font-weight: bold;
            color: #636e72;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .food-options {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .food-item {
            font-size: 2rem;
            background: #f1f2f6;
            padding: 10px;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.2s;
            min-width: 50px;
            text-align: center;
        }

        .food-item:hover { transform: scale(1.1); background: #fab1a0; }
        .food-item.selected { background: #ff7675; color: white; transform: scale(1.1); }

        /* Input lá»i nháº¯n */
        .note-input {
            margin-top: 20px;
            width: 90%;
            max-width: 300px;
            padding: 10px;
            border: 2px solid #fab1a0;
            border-radius: 10px;
            font-family: inherit;
        }

        /* NÃºt náº¥u Äƒn */
        .btn-cook {
            margin-top: 20px;
            margin-bottom: 40px;
            background: #e17055;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 0 #bf462a;
            transition: all 0.2s;
        }

        .btn-cook:active { transform: translateY(4px); box-shadow: 0 1px 0 #bf462a; }

        /* MÃ n hÃ¬nh náº¥u Äƒn (Overlay) */
        .cooking-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            color: white;
        }

        .pan {
            font-size: 5rem;
            animation: toss 0.5s infinite alternate;
        }

        @keyframes toss {
            from { transform: rotate(0deg) translateY(0); }
            to { transform: rotate(-20deg) translateY(-20px); }
        }

    </style>
</head>
<body>

<a href="/" style="position: absolute; top: 20px; left: 20px; text-decoration: none; color: #d35400; font-weight: bold;">â¬… Trang chá»§</a>

<h1>Báº¿p CÆ¡m TÃ¬nh YÃªu ğŸ±</h1>
<div class="subtitle">Anh Ä‘i quÃ¢n sá»± Äƒn uá»‘ng kham khá»•, Ä‘á»ƒ em náº¥u cho anh nhÃ©!</div>

<div class="bento-box" id="bento">
    <div class="compartment" id="slot-1" onclick="clearSlot(1)"></div>
    <div class="compartment" id="slot-2" onclick="clearSlot(2)"></div>
    <div class="compartment" id="slot-3" onclick="clearSlot(3)"></div>
    <div class="compartment" id="slot-4" onclick="clearSlot(4)"></div>
</div>
<div class="menu-section">

    <div class="category-title">ğŸš Tinh Bá»™t & MÃ³n ChÃ­nh (Chá»n 1)</div>
    <div class="food-options" id="carbs">
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸš')">ğŸš</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ™')">ğŸ™</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ›')">ğŸ›</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸœ')">ğŸœ</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ')">ğŸ</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ¥¡')">ğŸ¥¡</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ')">ğŸ</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ¥')">ğŸ¥</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ¥¯')">ğŸ¥¯</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ¥')">ğŸ¥</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸŸ')">ğŸŸ</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ•')">ğŸ•</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ”')">ğŸ”</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸŒ­')">ğŸŒ­</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ¥ª')">ğŸ¥ª</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸŒ®')">ğŸŒ®</div>
        <div class="food-item" onclick="selectFood(this, 'carbs', 'ğŸ¥Ÿ')">ğŸ¥Ÿ</div>
    </div>

    <div class="category-title" style="margin-top: 15px;">ğŸ— Team Thá»‹t ThÃ  & Háº£i Sáº£n (Chá»n 1)</div>
    <div class="food-options" id="protein">
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ—')">ğŸ—</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ–')">ğŸ–</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¥©')">ğŸ¥©</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¥“')">ğŸ¥“</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸŒ­')">ğŸŒ­</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¥š')">ğŸ¥š</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ³')">ğŸ³</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¤')">ğŸ¤</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸŸ')">ğŸŸ</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ£')">ğŸ£</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¦€')">ğŸ¦€</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¦')">ğŸ¦</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¦‘')">ğŸ¦‘</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ™')">ğŸ™</div>
        <div class="food-item" onclick="selectFood(this, 'protein', 'ğŸ¥«')">ğŸ¥«</div>
    </div>

    <div class="category-title" style="margin-top: 15px;">ğŸ¥¦ Rau Cá»§ & Canh (Chá»n 1)</div>
    <div class="food-options" id="veggie">
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥¦')">ğŸ¥¦</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥¬')">ğŸ¥¬</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥’')">ğŸ¥’</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥•')">ğŸ¥•</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸŒ½')">ğŸŒ½</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ…')">ğŸ…</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ†')">ğŸ†</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥”')">ğŸ¥”</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ ')">ğŸ </div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥‘')">ğŸ¥‘</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ„')">ğŸ„</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸŒ¶ï¸')">ğŸŒ¶ï¸</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥—')">ğŸ¥—</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥˜')">ğŸ¥˜</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ²')">ğŸ²</div>
        <div class="food-item" onclick="selectFood(this, 'veggie', 'ğŸ¥£')">ğŸ¥£</div>
    </div>

    <div class="category-title" style="margin-top: 15px;">ğŸ° TrÃ¡ng Miá»‡ng & Äá»“ Uá»‘ng (Chá»n 1)</div>
    <div class="food-options" id="dessert">
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ“')">ğŸ“</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ')">ğŸ</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ’')">ğŸ’</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ‰')">ğŸ‰</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸŒ')">ğŸŒ</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ‡')">ğŸ‡</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ°')">ğŸ°</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ‚')">ğŸ‚</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ§')">ğŸ§</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ¦')">ğŸ¦</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ§')">ğŸ§</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ©')">ğŸ©</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸª')">ğŸª</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ«')">ğŸ«</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ¬')">ğŸ¬</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ­')">ğŸ­</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ§‹')">ğŸ§‹</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ¥¤')">ğŸ¥¤</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'â˜•')">â˜•</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸº')">ğŸº</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ·')">ğŸ·</div>
        <div class="food-item" onclick="selectFood(this, 'dessert', 'ğŸ¼')">ğŸ¼</div>
    </div>
</div>

<input type="text" id="message" class="note-input" placeholder="Nháº¯n nhá»§ gÃ¬ cho anh khÃ´ng? (VD: Ä‚n ngon nhÃ©!)">

<button class="btn-cook" onclick="cook()">ğŸ”¥ Náº¤U & Gá»¬I NGAY</button>

<div class="cooking-overlay" id="cooking">
    <div class="pan">ğŸ³</div>
    <h2>Äang náº¥u nÆ°á»›ng...</h2>
    <p>Vá»£ Ä‘ang nÃªm náº¿m gia vá»‹ tÃ¬nh yÃªu â¤ï¸</p>
</div>

<script>
    // LÆ°u trá»¯ cÃ¡c mÃ³n Ä‘Ã£ chá»n
    const menu = {
        carbs: '',
        protein: '',
        veggie: '',
        dessert: ''
    };

    function selectFood(el, category, icon) {
        // XÃ³a class selected cÅ© trong cÃ¹ng hÃ ng
        const siblings = el.parentElement.children;
        for (let i = 0; i < siblings.length; i++) {
            siblings[i].classList.remove('selected');
        }

        // Highlight cÃ¡i má»›i
        el.classList.add('selected');

        // LÆ°u vÃ o data
        menu[category] = icon;

        // Cáº­p nháº­t lÃªn há»™p cÆ¡m (Logic Ä‘Æ¡n giáº£n: GÃ¡n vÃ o 4 Ã´ cá»‘ Ä‘á»‹nh)
        updateBento();
    }

    function updateBento() {
        // Cáº­p nháº­t láº§n lÆ°á»£t 4 Ã´
        document.getElementById('slot-1').innerText = menu.carbs;
        document.getElementById('slot-2').innerText = menu.protein;
        document.getElementById('slot-3').innerText = menu.veggie;
        document.getElementById('slot-4').innerText = menu.dessert;

        // ThÃªm class filled Ä‘á»ƒ Ä‘áº¹p hÆ¡n
        if(menu.carbs) document.getElementById('slot-1').classList.add('filled');
        if(menu.protein) document.getElementById('slot-2').classList.add('filled');
        if(menu.veggie) document.getElementById('slot-3').classList.add('filled');
        if(menu.dessert) document.getElementById('slot-4').classList.add('filled');
    }
    function clearSlot(slotId) {
        // XÃ³a mÃ³n Äƒn khá»i menu dá»±a trÃªn vá»‹ trÃ­ slot
        if (slotId === 1) menu.carbs = '';
        if (slotId === 2) menu.protein = '';
        if (slotId === 3) menu.veggie = '';
        if (slotId === 4) menu.dessert = '';

        // XÃ³a class visual
        document.getElementById('slot-' + slotId).classList.remove('filled');
        document.getElementById('slot-' + slotId).innerText = '';
    }

    function cook() {
        // 1. Kiá»ƒm tra xem Ä‘Ã£ chá»n Ä‘á»§ mÃ³n chÆ°a
        if (!menu.carbs || !menu.protein || !menu.veggie || !menu.dessert) {
            alert("Æ  kÃ¬a! Há»™p cÆ¡m cÃ²n trá»‘ng, anh Äƒn sao no Ä‘Æ°á»£c? Chá»n Ä‘á»§ 4 mÃ³n Ä‘i em! ğŸ¥º");
            return;
        }

        const msg = document.getElementById('message').value || "Ä‚n ngon miá»‡ng nhÃ© chá»“ng yÃªu!";

        // 2. Hiá»‡n mÃ n hÃ¬nh Ä‘ang náº¥u
        const overlay = document.getElementById('cooking');
        overlay.style.display = 'flex';

        // 3. Giáº£ láº­p thá»i gian náº¥u 2 giÃ¢y rá»“i gá»­i
        setTimeout(() => {
            // Táº¡o chuá»—i thá»±c Ä‘Æ¡n Ä‘á»ƒ gá»­i
            const dishList = `${menu.carbs} + ${menu.protein} + ${menu.veggie} + ${menu.dessert}`;

            // Gá»i API gá»­i vá» Server (Discord)
            fetch(`/api/cook-bento?dishList=${encodeURIComponent(dishList)}&message=${encodeURIComponent(msg)}`, {
                method: 'POST'
            })
                .then(res => {
                    overlay.style.display = 'none'; // Táº¯t mÃ n hÃ¬nh náº¥u
                    if (res.ok) {
                        alert("ğŸ± Xong rá»“i! CÆ¡m nÃ³ng há»•i vá»«a thá»•i vá»«a Äƒn Ä‘Ã£ Ä‘Æ°á»£c gá»­i Ä‘i! â¤ï¸");
                        location.reload(); // Táº£i láº¡i trang Ä‘á»ƒ náº¥u há»™p má»›i
                    } else {
                        alert("Lá»—i máº¡ng rá»“i :( NhÆ°ng táº¥m lÃ²ng cá»§a em anh Ä‘Ã£ nháº­n Ä‘Æ°á»£c!");
                    }
                })
                .catch(err => {
                    overlay.style.display = 'none';
                    alert("CÃ³ lá»—i xáº£y ra, thá»­ láº¡i sau nhÃ©!");
                });

        }, 2500); // Äá»£i 2.5 giÃ¢y cho hiá»‡u á»©ng náº¥u
    }
</script>
</body>
</html>