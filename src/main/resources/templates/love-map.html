<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bản Đồ Tình Yêu ❤️</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    body { margin: 0; padding: 0; }

    #map {
      height: 100vh; /* Full màn hình */
      width: 100%;
    }

    .custom-popup .leaflet-popup-content-wrapper {
      border-radius: 15px;
      padding: 0;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }

    .custom-popup .leaflet-popup-content {
      margin: 0;
      width: 250px !important;
    }

    .popup-img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      display: block;
    }

    .popup-info {
      padding: 15px;
      text-align: center;
    }

    .popup-info h3 {
      margin: 0 0 5px 0;
      color: #d63384;
      font-family: 'Segoe UI', sans-serif;
    }

    .popup-info p {
      margin: 0;
      font-size: 13px;
      color: #555;
    }

    /* Nút quay về */
    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 1000; /* Nằm trên bản đồ */
      background: white;
      padding: 10px 20px;
      border-radius: 30px;
      text-decoration: none;
      color: #333;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      font-family: sans-serif;
    }
  </style>
</head>
<body>

<a href="/" class="back-btn">⬅ Về Trang Chủ</a>

<div id="map"></div>
<script>
  // 1. Khởi tạo bản đồ
  // Chỉnh tâm bản đồ về giữa khu vực Hà Nội mở rộng để nhìn thấy cả FPT và Phenikaa
  const map = L.map('map').setView([21.00, 105.79], 12);

  // 2. Thêm lớp nền bản đồ
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© Bản đồ tình yêu của chúng mình'
  }).addTo(map);

  // 3. Tạo biểu tượng trái tim
  const heartIcon = L.icon({
    iconUrl: 'https://cdn-icons-png.flaticon.com/512/210/210545.png',
    iconSize: [40, 40],
    iconAnchor: [20, 40],
    popupAnchor: [0, -40]
  });

  // 4. DANH SÁCH ĐỊA ĐIỂM (Đã thêm 2 trường học)
  // Thứ tự trong danh sách này sẽ quyết định đường nối vẽ như thế nào
  const locations = [
    {
      // 1. Nhà Bạn (Hai Bà Trưng)
      coords: [21.009057, 105.855235],
      title: "Nhà Của Anh (HBT)",
      desc: "Đại bản doanh của anh.",
      img: "https://media.giphy.com/media/l4pTdcifPZLpDjL1e/giphy.gif"
    },
    {
      // 2. Trường Bạn (FPT Poly - Trịnh Văn Bô)
      coords: [21.038108, 105.746853],
      title: "FPT Polytechnic (Trịnh Văn Bô)",
      desc: "Nơi anh dùi mài kinh sử (và thỉnh thoảng ngủ gật). Thực học - Thực nghiệp!",
      img: "https://media.giphy.com/media/3oKIPnAiaMCws8nOsE/giphy.gif" // Ảnh học bài
    },
    {
      // 3. Aeon Mall Hà Đông (Nơi gặp nhau)
      coords: [20.980630, 105.752605],
      title: "Aeon Mall Hà Đông",
      desc: "Nơi định mệnh bắt đầu! Kỷ niệm lần đầu tiên gặp gỡ.",
      img: "https://media.giphy.com/media/13CoXDiaCcCoyk/giphy.gif"
    },
    {
      // 4. Trường Cô ấy (Phenikaa)
      coords: [20.962611, 105.746888],
      title: "Đại học Phenikaa",
      desc: "Trường của công chúa nè. Xịn xò lắm lun.",
      img: "https://media.giphy.com/media/l0HlO3BJ8LAL5WRKo/giphy.gif" // Ảnh trường lớp
    },
    {
      // 5. Nhà Cô ấy (Hà Đông)
      coords: [20.973273, 105.776632],
      title: "Nhà Của Em (Hà Đông)",
      desc: "Nơi bình yên nhất. Ngủ ngoan nhé bé yêu!",
      img: "https://media.giphy.com/media/3o7TKoWXm3okO1kgHC/giphy.gif"
    }
  ];

  // 5. Vòng lặp để ghim và NỐI DÂY
  var latlngs = []; // Mảng chứa tọa độ để vẽ đường

  locations.forEach(loc => {
    const marker = L.marker(loc.coords, {icon: heartIcon}).addTo(map);
    latlngs.push(loc.coords);

    const popupContent = `
                <div class="popup-img" style="background: url('${loc.img}') center/cover no-repeat;"></div>
                <div class="popup-info">
                    <h3>${loc.title}</h3>
                    <p>${loc.desc}</p>
                </div>
            `;

    marker.bindPopup(popupContent, {
      className: 'custom-popup'
    });
  });

  // 6. Vẽ đường nối (Dây tơ hồng) đi qua tất cả các điểm theo thứ tự
  var polyline = L.polyline(latlngs, {color: '#ff4d6d', weight: 4, dashArray: '10, 10'}).addTo(map);

  // Tự động zoom bản đồ sao cho vừa khít tất cả các điểm
  map.fitBounds(polyline.getBounds(), {padding: [50, 50]});

</script>
</body>
</html>